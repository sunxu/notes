Debian 开机自动挂载ISO,以本地ISO作为更新源
Debian 开机自动挂载ISO,以本地ISO作为更新源来至：http://hi.baidu.com/recallshan/blog/item/c43912dd8ca8c23e5882dd75.html
我下载了4个Debian ISO 可以做本地apt update

我的ISO是放在Windows上的 NTFS分区的

首先让系统自动挂载NTFS

#让系统开机自动挂载NTFS和FAT盘
sudo gedit /etc/fstab

写入
/dev/sdb1 /mnt/sdb/sdb8 ntfs iocharset=utf8,users,exec,ro,umask=000 0 0
/dev/sdb2 /mnt/sdb/sdb9 vfat iocharset=utf8,users,exec 0 0
第一行是挂载NTFS的，第二行是挂载FAT的，我的ISO放在sdb8里
IDE硬盘是hd，SATA硬盘是sd，我的ISO是放在第二个并口硬盘，也就是sdb
sdb8 , 第二个并口硬盘的第8个分区
分区，挂载目录自定

#让系统自动挂载ISO
假设WIN分区里的ISO已经在/mnt/sdb/sdb8下了
gedit /etc/init.d/mountiso

写入
#!/bin/sh
#This is a shell script automount the Linux Install ISO files. 
mount -o loop /mnt/sdb/sda8/debian-502-i386-CD-1.iso /mnt/iso/iso1
mount -o loop /mnt/sdb/sda8/debian-502-i386-CD-2.iso /mnt/iso/iso2
mount -o loop /mnt/sdb/sda8/debian-502-i386-CD-3.iso /mnt/iso/iso3
mount -o loop /mnt/sdb/sda8/debian-502-i386-CD-4.iso /mnt/iso/iso4
ISO存放分区，ISO挂载目录自定

#给mountiso加可执行权限
sudo chmod 755 /etc/init.d/mountiso
chmod +W 也行，同等意思

#挂链接
sudo ln -s /etc/init.d/mountiso /etc/rcS.d/S96mountiso
这样开机就会自动挂载ISO了
S96解释：以S开头表明是开机时会执行的文件，96 是执行的优先顺序，mountiso 表明指向的文件名。 

#把挂载好的ISO添加到apt列表里去，以做更新源
我已经把debian-502-i386-CD-1.iso 挂载到/mnt/iso/iso1里去了
sudo apt-cdrom -m -d /mnt/iso/iso1 add

然后
gedit /etc/apt/sources.list

就会看到
deb cdrom:[Debian GNU/Linux 5.0.2 _Lenny_ - Official i386 CD Binary-1 20090628-14:43]/ lenny main

修改下
deb file:/mnt/iso/iso1 lenny main

stable是稳定源的意思，开发代号是 sagre
也可以用testing，开发代号是 etch
lenny我不知道是什么意思，好像也是稳定的代号
也可以修改为 deb file:/mnt/iso/iso1 stable main
或者两个一起用?

OVER